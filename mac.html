<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iKontroller Desktop MacOS Support</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>iKontroller for Mac</h1>
            <p>Support & Documentation</p>
            <div class="app-store-badges">
                <a href="https://apps.apple.com/us/app/ikontroller-desktop/id6755576478?mt=12" target="_blank">
                    <img src="Download_on_the_Mac_App_Store_Badge.svg" alt="Download on the Mac App Store">
                </a>
            </div>
            <div class="platform-links">
                <a href="index.html">← Back to Main Support</a>
                <a href="ios.html">iOS Support</a>
            </div>
        </header>

        <div class="section">
            <h2>Setup Guide</h2>
            <ol>
                <li>Download iKontroller from the Mac App Store</li>
                <li>Launch the app and enter your username</li>
                <li>Grant <strong>Accessibility</strong> permission when prompted</li>
                <li>Grant <strong>Local Network</strong> permission when prompted</li>
                <li>The Mac app will start advertising itself and browse for iOS devices</li>
            </ol>
        </div>

        <div class="section">
            <h2>Granting Accessibility Permissions</h2>
            <p>iKontroller requires Accessibility permissions to simulate keyboard and mouse input from your iPhone and iPad.</p>
            
            <h3>How to Grant Permission:</h3>
            <ol>
                <li>Open <strong>System Settings</strong> (or System Preferences on older macOS)</li>
                <li>Navigate to <strong>Privacy & Security</strong></li>
                <li>Click on <strong>Accessibility</strong></li>
                <li>Click the <strong>+</strong> button (you may need to unlock with your password)</li>
                <li>Find and select <strong>iKontroller</strong></li>
                <li>Ensure the checkbox next to iKontroller is <strong>enabled</strong></li>
                <li>Restart iKontroller if it was already running</li>
            </ol>

            <div class="note">
                <strong>Important:</strong> Without Accessibility permissions, you will not be able to simulate keybaord and mouse inputs on your Mac. This is a macOS security requirement for any app that simulates input. 
            </div>
        </div>

        <div class="section">
            <h2>Device Pairing</h2>
            
            <h3>Pairing a New iPhone or iPad</h3>
            <ol>
                <li>Ensure the iPhone/iPad and Mac are on the same network or connected via USB-C/Lightning cable</li>
                <li>On your Mac, go to the <strong>Device Pairing</strong> tab</li>
                <li>On iOS, select your Mac from the discovered devices</li>
                <li>A 6-digit code will appear on your Mac</li>
                <li>Enter this code on your iOS device</li>
                <li>The devices are now paired! </li>
            </ol>

            <h3>Managing Paired Devices</h3>
            <ul>
                <li><strong>Forget:</strong> Remove a device as paired and delete all its mappings and data</li>
                <li><strong>Block:</strong> Remove a device as paired, delete all its mappings and data and prevent the device from pairing again. A blocked device cannot send you any data</li>
                <li><strong>Unblock:</strong> Settings → Blocked Devices → Unblock</li>
            </ul>
        </div>

        <div class="section">
            <h2>Settings & Customization</h2>
            
            <h3>Adjusting Sensitivity</h3>
            <p>Go to <strong>Settings</strong> → <strong>General</strong>:</p>
            <ul>
                <li><strong>Relative Sensitivity:</strong> Controls in-game camera movement speed</li>
                <li><strong>Scroll Sensitivity:</strong> Controls scroll wheel speed</li>
            </ul>

            <h3>Changing Username</h3>
            <ol>
                <li>Go to Settings → General</li>
                <li>Click the pencil icon next to your username</li>
                <li>Enter new username</li>
                <li>Click Save (the app will validate the name)</li>
            </ol>

            <div class="note">
                <strong>Note:</strong> Username validation ensures compatibility with network discovery (Bonjour).  Very long names or excessive emojis may be rejected.
            </div>
        </div>

        <div class="section">
            <h2>Active Keys Visualization</h2>
            <p>iKontroller shows floating visual feedback of active keys on your Mac screen. This helps with:</p>
            <ul>
                <li>Verifying key presses during gaming</li>
                <li>Streaming or recording gameplay</li>
                <li>Debugging custom mappings</li>
            </ul>
            <p>Keys appear as they're pressed and fade out when released.</p>
        </div>

        <div class="section">
            <h2>Troubleshooting Mac Issues</h2>
            
            <h3>Keys Not Working/Stuck Keys</h3>
            <ul>
                <li>Verify Accessibility permissions are granted</li>
                <li>Disconnect and reconnect your iPhone/iPad</li>
                <li>iKontroller has automatic stuck key detection and correction; Press or use the button/joystick that caused the stuck key(s) again and it should get released</li>
                <li>Press the stuck key on your physical keyboard to release it</li>
            </ul>

            <h3>Mouse Cursor Behavior Issues</h3>
            <ul>
                <li>Adjust Relative Sensitivity in Settings</li>
                <li>Switch between Relative and Absolute modes on iOS</li>
            </ul>

            <h3>Connection Drops After Network Change</h3>
            <ul>
                <li>iKontroller automatically detects network changes</li>
                <li>Both apps will attempt to reconnect</li>
                <li>If reconnection fails, manually disconnect and reconnect on iOS</li>
            </ul>

            <h3>Firewall Blocking Connections</h3>
            <p>If using a firewall:</p>
            <ol>
                <li>Open System Settings → Network → Firewall</li>
                <li>Click Options</li>
                <li>Ensure iKontroller is allowed to receive incoming connections</li>
                <li>Add ports 8888, 8889, 8896, 8897, 8898, 8899 if using custom firewall rules</li>
            </ol>
        </div>

        <div class="section">
            <h2>Technical Details</h2>
            
            <h3>Network Ports Used</h3>
            <ul>
                <li><strong>TCP 8888:</strong> Main connection for pairing and mappings</li>
                <li><strong>UDP 8889:</strong> Main connection for pairing and mappings (ultra high-frequency)</li>
                <li><strong>TCP 8898:</strong> Dedicated to binary controls data (buttons and joysticks input)</li>
                <li><strong>TCP 8899:</strong> Dedicated to binary touchpad data (touchpad and mouse input)</li>
                <li><strong>UDP 8896:</strong> Dedicated to binary controls data (ultra high-frequency buttons and joysticks input)</li>
                <li><strong>UDP 8897:</strong> Dedicated to binary touchpad data (ultra high-frequency touchpad and mouse input)</li>
            </ul>

            <h3>Supported Features</h3>
            <ul>
                <li>Apple Silicon (M1/M2/M3/M4) and Intel Macs</li>
                <li>Multiple external displays</li>
                <li>Full-screen/minimized/windowed apps and games</li>
                <li>Modifier keys (Shift, Command, Option, Control)</li>
                <li>Reference-counted key presses (prevents stuck keys)</li>
                <li>Sub-20ms input latency on local networks</li>
            </ul>
        </div>

        <footer>
            <p><a href="index.html">← Back to Main Support</a></p>
            <p>&copy; Copyright 2026 iKontroller Inc. All rights reserved.</p>
        </footer>
    </div>
</body>
</html>
